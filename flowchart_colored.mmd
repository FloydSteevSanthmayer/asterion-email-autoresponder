flowchart LR
    A(["Start"]):::start --> B(["Check inbox for new messages"]):::check
    B --> C{["New message?"]}:::decision
    C -- "No" --> B
    C -- "Yes" --> D(["Read message body & headers"]):::process
    D --> E{["Contains 'Business email'?"]}:::decision
    E -- "No" --> F(["Mark as Seen - skip"]):::end --> B
    E -- "Yes" --> G(["Extract business email address"]):::process
    G --> H(["Validate & avoid loops"]):::process
    H --> I(["Send professional threaded reply (SMTP)"]):::reply
    I --> J(["Mark as Answered & Seen"]):::end --> B

    classDef start fill:#90EE90,stroke:#2E8B57,color:#000;
    classDef check fill:#ADD8E6,stroke:#1E90FF,color:#000;
    classDef decision fill:#FFD580,stroke:#FF8C00,color:#000;
    classDef process fill:#E6E6FA,stroke:#6A5ACD,color:#000;
    classDef reply fill:#FFB6C1,stroke:#FF1493,color:#000;
    classDef end fill:#D3D3D3,stroke:#696969,color:#000;
